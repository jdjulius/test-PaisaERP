# üöÄ Gu√≠a Paso a Paso: Crear Automatizaci√≥n para Roadmap.sh

Esta gu√≠a te ayudar√° a crear una nueva automatizaci√≥n para el escenario:
1. Abrir https://roadmap.sh/
2. Hacer clic en "Data Analyst"
3. Validar el t√≠tulo "Data Analyst Roadmap"

## üìã Prerequisitos

- Node.js instalado (versi√≥n 18 o superior)
- Proyecto configurado con dependencias instaladas
- Navegadores de Playwright instalados

## üóÇÔ∏è Estructura del Proyecto

```
tests/
‚îú‚îÄ‚îÄ pages/           # Page Object Models
‚îú‚îÄ‚îÄ specs/           # Archivos de prueba
‚îú‚îÄ‚îÄ data/            # Datos de prueba
‚îú‚îÄ‚îÄ fixtures/        # Fixtures y configuraciones
‚îú‚îÄ‚îÄ types/           # Tipos TypeScript
‚îî‚îÄ‚îÄ utils/           # Utilidades comunes
```

## üìù Paso 1: Crear el Page Object Model

### 1.1 Crear el archivo `RoadmapPage.ts`

Crea el archivo en `tests/pages/RoadmapPage.ts`:

```typescript
import { Page, Locator, expect } from '@playwright/test';
import { BasePage } from './BasePage';

/**
 * Page Object Model para Roadmap.sh
 * Maneja la navegaci√≥n y interacciones con el sitio
 */
export class RoadmapPage extends BasePage {
  // Selectores de elementos
  readonly dataAnalystLink: Locator;
  readonly pageTitle: Locator;
  readonly mainHeader: Locator;
  readonly roadmapContainer: Locator;

  constructor(page: Page) {
    super(page);
    
    // Definir selectores
    this.dataAnalystLink = page.locator('a[href="/data-analyst"]');
    this.pageTitle = page.locator('h1');
    this.mainHeader = page.locator('header h1');
    this.roadmapContainer = page.locator('[data-testid="roadmap-container"]');
  }

  /**
   * Navegar a la p√°gina principal de Roadmap.sh
   */
  async navigateToRoadmap(): Promise<void> {
    await this.navigateTo('https://roadmap.sh/');
    await this.waitForPageLoad();
  }

  /**
   * Hacer clic en el enlace de Data Analyst
   */
  async clickDataAnalyst(): Promise<void> {
    await this.clickElement(this.dataAnalystLink);
    await this.waitForPageLoad();
  }

  /**
   * Validar que el t√≠tulo contiene "Data Analyst Roadmap"
   */
  async validateDataAnalystTitle(): Promise<void> {
    await this.waitForElement(this.pageTitle);
    const titleText = await this.pageTitle.textContent();
    
    expect(titleText).toContain('Data Analyst Roadmap');
  }

  /**
   * Esperar a que la p√°gina se cargue completamente
   */
  private async waitForPageLoad(): Promise<void> {
    await this.page.waitForLoadState('networkidle');
  }

  /**
   * Verificar que estamos en la p√°gina correcta
   */
  async verifyPageUrl(): Promise<void> {
    expect(this.page.url()).toContain('/data-analyst');
  }

  /**
   * Obtener el texto del t√≠tulo para verificaciones adicionales
   */
  async getTitleText(): Promise<string> {
    await this.waitForElement(this.pageTitle);
    return await this.pageTitle.textContent() || '';
  }

  /**
   * Verificar que los elementos principales est√°n presentes
   */
  async verifyPageElements(): Promise<void> {
    await this.waitForElement(this.pageTitle);
    await this.waitForElement(this.roadmapContainer);
  }
}
```

### 1.2 Comandos para crear el archivo

```powershell
# Crear el archivo RoadmapPage.ts
New-Item -Path "tests\pages\RoadmapPage.ts" -ItemType File
```

## üìù Paso 2: Crear el Archivo de Prueba

### 2.1 Crear el archivo `roadmap.spec.ts`

Crea el archivo en `tests/specs/roadmap.spec.ts`:

```typescript
import { test, expect } from '@playwright/test';
import { RoadmapPage } from '../pages/RoadmapPage';

/**
 * Suite de pruebas para Roadmap.sh
 * Validaci√≥n del flujo de navegaci√≥n y contenido
 */
test.describe('Roadmap.sh - Data Analyst', () => {
  let roadmapPage: RoadmapPage;

  test.beforeEach(async ({ page }) => {
    roadmapPage = new RoadmapPage(page);
  });

  test('Navegar a Data Analyst y validar t√≠tulo', async ({ page }) => {
    // Paso 1: Abrir https://roadmap.sh/
    await roadmapPage.navigateToRoadmap();
    
    // Paso 2: Hacer clic en Data Analyst
    await roadmapPage.clickDataAnalyst();
    
    // Paso 3: Validar el t√≠tulo "Data Analyst Roadmap"
    await roadmapPage.validateDataAnalystTitle();
    
    // Verificaciones adicionales
    await roadmapPage.verifyPageUrl();
    await roadmapPage.verifyPageElements();
  });

  test('Verificar elementos de la p√°gina Data Analyst', async ({ page }) => {
    // Navegar directamente a la p√°gina del Data Analyst
    await roadmapPage.navigateTo('https://roadmap.sh/data-analyst');
    
    // Verificar que todos los elementos est√°n presentes
    await roadmapPage.verifyPageElements();
    
    // Obtener y verificar el texto del t√≠tulo
    const titleText = await roadmapPage.getTitleText();
    expect(titleText.toLowerCase()).toContain('data analyst');
  });

  test('Flujo completo con validaciones detalladas', async ({ page }) => {
    // Navegar a la p√°gina principal
    await roadmapPage.navigateToRoadmap();
    
    // Tomar screenshot del estado inicial
    await page.screenshot({ path: 'test-results/screenshots/roadmap-home.png' });
    
    // Hacer clic en Data Analyst
    await roadmapPage.clickDataAnalyst();
    
    // Tomar screenshot despu√©s del clic
    await page.screenshot({ path: 'test-results/screenshots/data-analyst-page.png' });
    
    // Validar URL
    await roadmapPage.verifyPageUrl();
    
    // Validar t√≠tulo
    await roadmapPage.validateDataAnalystTitle();
    
    // Verificar elementos de la p√°gina
    await roadmapPage.verifyPageElements();
    
    // Log de confirmaci√≥n
    console.log('‚úÖ Prueba completada exitosamente');
  });
});
```

### 2.2 Comandos para crear el archivo

```powershell
# Crear el archivo de prueba
New-Item -Path "tests\specs\roadmap.spec.ts" -ItemType File
```

## üìù Paso 3: Crear Datos de Prueba (Opcional)

### 3.1 Crear archivo de datos

Crea el archivo en `tests/data/roadmap-data.json`:

```json
{
  "urls": {
    "base": "https://roadmap.sh/",
    "dataAnalyst": "https://roadmap.sh/data-analyst"
  },
  "expectedTexts": {
    "title": "Data Analyst Roadmap",
    "titleVariations": [
      "Data Analyst Roadmap",
      "Data Analyst",
      "roadmap"
    ]
  },
  "selectors": {
    "dataAnalystLink": "a[href='/data-analyst']",
    "alternativeSelectors": [
      "text='Data Analyst'",
      "[data-testid='data-analyst-link']"
    ]
  }
}
```

### 3.2 Comandos para crear el archivo

```powershell
# Crear el archivo de datos
New-Item -Path "tests\data\roadmap-data.json" -ItemType File
```

## üìù Paso 4: Configurar el Entorno

### 4.1 Actualizar variables de entorno

Agrega las siguientes variables al archivo `.env`:

```bash
# ===== CONFIGURACI√ìN DE ROADMAP.SH =====
ROADMAP_BASE_URL=https://roadmap.sh/
ROADMAP_TIMEOUT=10000
ROADMAP_RETRY_COUNT=3

# Configuraci√≥n para pruebas de Roadmap
TEST_TYPE=roadmap
```

### 4.2 Actualizar package.json

Agrega scripts espec√≠ficos para las pruebas de Roadmap:

```json
{
  "scripts": {
    "test:roadmap": "TEST_TYPE=roadmap playwright test roadmap.spec.ts",
    "test:roadmap:headed": "TEST_TYPE=roadmap playwright test roadmap.spec.ts --headed",
    "test:roadmap:debug": "TEST_TYPE=roadmap playwright test roadmap.spec.ts --debug",
    "test:roadmap:chrome": "TEST_TYPE=roadmap playwright test roadmap.spec.ts --project=chromium"
  }
}
```

## üöÄ Paso 5: Ejecutar las Pruebas

### 5.1 Comandos de ejecuci√≥n

```powershell
# Ejecutar la prueba espec√≠fica
npm run test:roadmap

# Ejecutar con interfaz gr√°fica
npm run test:roadmap:headed

# Ejecutar en modo debug
npm run test:roadmap:debug

# Ejecutar solo en Chrome
npm run test:roadmap:chrome

# Ejecutar todas las pruebas
npm test
```

### 5.2 Verificar resultados

```powershell
# Ver el reporte HTML
npm run test:report

# Ver los screenshots generados
dir test-results\screenshots\

# Ver el reporte espec√≠fico
start test-results\html-report\index.html
```

## üîç Paso 6: Validaci√≥n y Debugging

### 6.1 Verificar que los selectores funcionan

```typescript
// En el archivo RoadmapPage.ts, agregar m√©todo de debugging
async debugSelectors(): Promise<void> {
  console.log('Verificando selectores...');
  
  // Verificar que el enlace existe
  const linkExists = await this.dataAnalystLink.isVisible();
  console.log(`Data Analyst link visible: ${linkExists}`);
  
  // Verificar URL actual
  console.log(`Current URL: ${this.page.url()}`);
  
  // Verificar t√≠tulo
  const title = await this.getTitleText();
  console.log(`Page title: ${title}`);
}
```

### 6.2 Comandos de debugging

```powershell
# Generar c√≥digo autom√°ticamente
npx playwright codegen https://roadmap.sh/

# Ejecutar en modo debug paso a paso
npx playwright test roadmap.spec.ts --debug

# Ejecutar con trace viewer
npx playwright test roadmap.spec.ts --trace on
```

## üìä Paso 7: Reportes y Evidencias

### 7.1 Configurar reportes personalizados

Las pruebas generar√°n autom√°ticamente:
- Screenshots en cada paso importante
- Videos de la ejecuci√≥n
- Reporte HTML con detalles
- Logs de consola

### 7.2 Ubicaci√≥n de reportes

```
test-results/
‚îú‚îÄ‚îÄ html-report/         # Reporte HTML principal
‚îú‚îÄ‚îÄ screenshots/         # Capturas de pantalla
‚îú‚îÄ‚îÄ videos/             # Videos de ejecuci√≥n
‚îî‚îÄ‚îÄ traces/             # Trazas para debugging
```

## üõ†Ô∏è Paso 8: Mejores Pr√°cticas

### 8.1 Manejo de errores

```typescript
// Agregar try-catch para manejo robusto
async clickDataAnalyst(): Promise<void> {
  try {
    await this.clickElement(this.dataAnalystLink);
    await this.waitForPageLoad();
  } catch (error) {
    console.error('Error al hacer clic en Data Analyst:', error);
    // Intentar selector alternativo
    await this.page.click('text="Data Analyst"');
  }
}
```

### 8.2 Esperas inteligentes

```typescript
// Usar waitForSelector con condiciones espec√≠ficas
async waitForDataAnalystPage(): Promise<void> {
  await this.page.waitForFunction(() => {
    return document.title.includes('Data Analyst') && 
           document.readyState === 'complete';
  });
}
```

### 8.3 Configuraci√≥n de timeouts

```typescript
// En playwright.config.ts
export default defineConfig({
  timeout: 30000, // 30 segundos por prueba
  expect: {
    timeout: 10000 // 10 segundos para assertions
  }
});
```

## üìã Checklist Final

- [ ] ‚úÖ Page Object Model creado (`RoadmapPage.ts`)
- [ ] ‚úÖ Archivo de prueba creado (`roadmap.spec.ts`)
- [ ] ‚úÖ Datos de prueba configurados (`roadmap-data.json`)
- [ ] ‚úÖ Variables de entorno actualizadas (`.env`)
- [ ] ‚úÖ Scripts de npm configurados (`package.json`)
- [ ] ‚úÖ Pruebas ejecutadas exitosamente
- [ ] ‚úÖ Reportes generados y verificados
- [ ] ‚úÖ Screenshots y videos capturados
- [ ] ‚úÖ Debugging completado
- [ ] ‚úÖ Documentaci√≥n actualizada

## üéØ Comandos R√°pidos

```powershell
# Setup completo
npm install
npm run install:browsers
cp .env.example .env

# Ejecutar la nueva automatizaci√≥n
npm run test:roadmap:headed

# Ver reportes
npm run test:report
```

## üìû Soporte

Si encuentras alg√∫n problema:
1. Verifica que los selectores son correctos
2. Ejecuta en modo debug para ver el flujo
3. Revisa los logs de consola
4. Comprueba que la p√°gina web no haya cambiado

¬°Listo! Ya tienes tu automatizaci√≥n para Roadmap.sh funcionando. üöÄ
